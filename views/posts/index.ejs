<% layout('layouts/boilerplate') -%>
<h1>Post Index</h1>
<div id="map"></div> 
<% include ../partials/postPaginate %>

<!-- here the posts.docs is added due to paginate -->
<% posts.docs.forEach(function(post) { %>
	<div>
		<h2><%= post.title %></h2>
		<div>Price: <%= post.price %></div>
		<div><%= post.description %></div>
		<div><%= post.location %></div>
        
		<div><a href="/posts/<%= post.id %>">View more</a></div>
	</div>
<% }); %>
<% include ../partials/postPaginate %>

<script>
	mapboxgl.accessToken = "<%= mapBoxToken %>";
    var posts = {features: <%- JSON.stringify(posts.docs) %>};
</script>
<script src="/javascripts/allPostsClusterMap.js"></script>